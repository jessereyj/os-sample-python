#!/bin/bash

set -e

shopt -s dotglob

cd /opt/app-root/src

echo "--> Installing application source"
cp -Rf /tmp/src/* ./

echo "Upgarding pip"
pip install -U pip setuptools wheel

echo "Installing dependencies"
pip install -r requirements.txt
pip install Flask-Mail

echo "--> Creating info page"
DATE=`date "+%Y-%m-%d @ %H-%M %p"`
echo "Page built on $DATE" >> ./info.html
echo "By Jebong" >> ./info.html

fix-permissions /opt/app-root
